<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/master.css">
    <title>Конвертер валют</title>
    <script type="text/javascript">
      window.onload = function() {

        var usd = 65.44, eur = 73.89, usdRub, eurRub, rubAmmount, clickCalc = 0;

        document.getElementById('intro').innerHTML = "Я помогу тебе расчитать свои рубли в долларах и евро."
        document.getElementById('usdResult').innerHTML = "Курс доллара: 1$ = <span id=usdRub>" + usd + "</span>₽."
        document.getElementById('eurResult').innerHTML = "Курс евро: 1€ = <span id=eurRub>" + eur + "</span>₽."
        document.getElementById('rubResult').innerHTML = "Необходимо задать сумму в рублях. Также ты можешь задать свои курсы для доллара и евро."

        var numChecker = function(num) {
          var check = 0 - num;
          //проверяем что num это число и оно не отрицательно (0 - num) < 0
          if (isNaN(check) || check >= 0) {
            return 1;
          }
          else {
            return 0;
          }
        }

        var rubCalc = function(rAmount, curExchRate, scale) {
          return rAmount * scale / curExchRate;
        }

        var currencyInput = function(name) {
          var output = +prompt("Введите значение " + name);
          while (numChecker(output) == 1) {
            output = +prompt("Неверное значение. \n\n 1. Значение должно быть больше нуля. \n 2. Для десятичной части используйте точку. \n\nПовторите ввод:");
          }
          if (name == "RUB") {
            document.getElementById(name.toLowerCase() + 'Rub').innerHTML = output.toFixed(2);
            document.getElementById(name.toLowerCase() + 'Usd').innerHTML = rubCalc(output, usd, 1).toFixed(2);
            document.getElementById(name.toLowerCase() + 'Eur').innerHTML = rubCalc(output, eur, 1).toFixed(2);
          }
          else {
            document.getElementById(name.toLowerCase() + 'Rub').innerHTML = output.toFixed(2);
          }
          return output;
        }

        var usdInput = document.getElementById('usdInput');
        usdInput.onclick = function() {
          if (clickCalc == 0) {
            usd = currencyInput("USD");
          }
          else {
            usd = currencyInput("USD");
            document.getElementById('rubUsd').innerHTML =  rubCalc(rubAmmount, usd, 1).toFixed(2);
          }
        }

        var eurInput = document.getElementById('eurInput');
        eurInput.onclick = function() {
          if (clickCalc == 0) {
            eur = currencyInput("EUR");
          }
          else {
            eur = currencyInput("EUR");
            document.getElementById('rubEur').innerHTML =  rubCalc(rubAmmount, eur, 1).toFixed(2);

          }
        }

        var rubInput = document.getElementById('rubInput');
        rubInput.onclick = function() {
        if (clickCalc == 0) {
          document.getElementById('rubResult').innerHTML = "<span id=rubRub></span> рублей равняются <span id=rubUsd></span> долларов или <span id=rubEur></span> евро."
          rubAmmount = currencyInput("RUB");
          clickCalc++;
        }
        else {
          rubAmmount = currencyInput("RUB");
        }
       }
      }
    </script>
  </head>
  <body>
    <div id="header">
      <div id="header">
        <a href="index.html">Главная</a> <span>/</span>
        <a href="riddles.html">Загадки</a> <span>/</span>
        <a href="sneakyComputer.html">Угадай число</a> <span>/</span>
        <a href="currencyExchange.html">Конвертер валют</a> <span>/</span>
        <a href="creditCalculator.html">Кредитный калькулятор</a> <span>/</span>
        <a href="depositCalculator.html">Депозитный калькулятор</a>
      </div>

      <div id="content">
        <h1>Конвертер валют</h1>
        <div id="center">
          <img src="img/me.jpg" alt="Это Я!" />
          <div id="box_text">
            <p id="intro">

            </p>
            <p id="usdResult">

            </p>
            <p id="eurResult">

            </p>
            <p id="rubResult">

            </p>
            <a href="#" class="inboxLink" id="usdInput">Задать курс доллара</a>/
            <a href="#" class="inboxLink" id="eurInput">Задать курс евро</a>/
            <a href="#" class="inboxLink" id="rubInput">Задать сумму в рублях</a>
            <p>

            </p>
            <div id="pageLinks">
              <a href="riddles.html" id="links">Загадки</a>
              <a href="sneakyComputer.html" id="links">Угадай число</a>
              <a href="currencyExchange.html" id="links">Конвертер валют</a>
              <a href="creditCalculator.html" id="links">Кредитный калькулятор</a>
              <a href="depositCalculator.html" id="links">Депозитный калькулятор</a>
            </div>
          </div>
        </div>
      </div>

      <div id="footer">
        Copyright © 2016 <a href="index.html">KODIB4NX</a>
      </div>
    </div>
  </body>
</html>
